<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Echo â€“ Anonymous Voice Connect</title>
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<style>
:root {
  /* Color Palette - Professional with High Contrast */
  --primary: #4361ee;
  --primary-dark: #3a56d4;
  --primary-light: #eef2ff;
  --secondary: #7209b7;
  --success: #06d6a0;
  --warning: #ffd166;
  --danger: #ef476f;
  --dark: #1a1a2e;
  --darker: #0d0d1a;
  --light: #f8f9fa;
  --gray: #6c757d;
  --gray-light: #e9ecef;
  --border-radius: 12px;
  --shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
  --shadow-lg: 0 10px 40px rgba(0, 0, 0, 0.15);
  --transition: all 0.3s ease;
  --font-main: 'Roboto', sans-serif;
}

/* Dark Theme (Default) */
[data-theme="dark"] {
  --bg-primary: var(--darker);
  --bg-secondary: var(--dark);
  --bg-card: #252540;
  --text-primary: #ffffff;
  --text-secondary: #b8b8d1;
  --border-color: #38385a;
  --input-bg: #1e1e3a;
}

/* Light Theme */
[data-theme="light"] {
  --bg-primary: #f5f7ff;
  --bg-secondary: #ffffff;
  --bg-card: #ffffff;
  --text-primary: #1a1a2e;
  --text-secondary: #4a4a68;
  --border-color: #d1d5e6;
  --input-bg: #f0f2f8;
}

* {
  margin: 0;
  padding: 0;
  box-sizing: border-box;
}

body {
  font-family: var(--font-main);
  background-color: var(--bg-primary);
  color: var(--text-primary);
  line-height: 1.6;
  transition: var(--transition);
  min-height: 100vh;
}

.container {
  max-width: 1200px;
  margin: 0 auto;
  padding: 0 20px;
}

/* Header */
.header {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 20px 0;
  border-bottom: 1px solid var(--border-color);
  margin-bottom: 30px;
}

.logo {
  display: flex;
  align-items: center;
  gap: 12px;
  font-size: 1.8rem;
  font-weight: 700;
  color: var(--primary);
}

.logo-icon {
  font-size: 2rem;
}

.header-buttons {
  display: flex;
  gap: 12px;
}

.header-btn {
  background: var(--bg-card);
  border: 1px solid var(--border-color);
  color: var(--text-primary);
  padding: 10px 16px;
  border-radius: var(--border-radius);
  cursor: pointer;
  font-weight: 500;
  transition: var(--transition);
  display: flex;
  align-items: center;
  gap: 8px;
}

.header-btn:hover {
  background: var(--primary);
  color: white;
  transform: translateY(-2px);
  box-shadow: var(--shadow);
}

/* Main App */
.app {
  padding-bottom: 40px;
}

.hero-section {
  text-align: center;
  margin-bottom: 40px;
  padding: 30px 0;
}

.hero-section h1 {
  font-size: 2.5rem;
  margin-bottom: 16px;
  background: linear-gradient(135deg, var(--primary), var(--secondary));
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
}

.hero-section p {
  font-size: 1.2rem;
  color: var(--text-secondary);
  max-width: 600px;
  margin: 0 auto;
}

/* Cards */
.card {
  background: var(--bg-card);
  border-radius: var(--border-radius);
  padding: 24px;
  box-shadow: var(--shadow);
  border: 1px solid var(--border-color);
  transition: var(--transition);
}

.card:hover {
  transform: translateY(-5px);
  box-shadow: var(--shadow-lg);
}

.card-header {
  display: flex;
  justify-content: between;
  align-items: center;
  margin-bottom: 16px;
  padding-bottom: 16px;
  border-bottom: 1px solid var(--border-color);
}

.card-title {
  font-size: 1.3rem;
  font-weight: 600;
  color: var(--text-primary);
}

/* Mobile Warning */
.mobile-warning {
  background: linear-gradient(135deg, var(--warning), #ff9e00);
  color: #000;
  padding: 20px;
  border-radius: var(--border-radius);
  margin-bottom: 30px;
  box-shadow: var(--shadow);
}

.mobile-warning h3 {
  margin-bottom: 12px;
  display: flex;
  align-items: center;
  gap: 10px;
}

.mobile-warning ul {
  padding-left: 20px;
}

.mobile-warning li {
  margin-bottom: 8px;
}

/* Form Elements */
.form-group {
  margin-bottom: 24px;
}

.form-label {
  display: block;
  margin-bottom: 8px;
  font-weight: 500;
  color: var(--text-primary);
}

.form-control {
  width: 100%;
  padding: 14px 16px;
  border-radius: var(--border-radius);
  border: 1px solid var(--border-color);
  background: var(--input-bg);
  color: var(--text-primary);
  font-size: 1rem;
  transition: var(--transition);
}

.form-control:focus {
  outline: none;
  border-color: var(--primary);
  box-shadow: 0 0 0 3px rgba(67, 97, 238, 0.2);
}

.select-wrap {
  position: relative;
}

.select-wrap::after {
  content: "â–¼";
  font-size: 0.8rem;
  position: absolute;
  right: 16px;
  top: 50%;
  transform: translateY(-50%);
  pointer-events: none;
  color: var(--text-secondary);
}

/* Recording Section */
.recording-section {
  text-align: center;
  margin: 30px 0;
  padding: 30px;
  background: var(--bg-secondary);
  border-radius: var(--border-radius);
  box-shadow: var(--shadow);
}

.mic-container {
  display: flex;
  justify-content: center;
  margin-bottom: 24px;
}

.mic-btn {
  width: 100px;
  height: 100px;
  border-radius: 50%;
  background: linear-gradient(135deg, var(--primary), var(--secondary));
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: var(--transition);
  box-shadow: var(--shadow);
  border: none;
  color: white;
  font-size: 2.5rem;
}

.mic-btn:hover {
  transform: scale(1.05);
  box-shadow: var(--shadow-lg);
}

.mic-btn.recording {
  background: linear-gradient(135deg, var(--danger), #ff2e63);
  animation: pulse 1.5s infinite;
}

@keyframes pulse {
  0% {
    box-shadow: 0 0 0 0 rgba(239, 71, 111, 0.7);
  }
  70% {
    box-shadow: 0 0 0 15px rgba(239, 71, 111, 0);
  }
  100% {
    box-shadow: 0 0 0 0 rgba(239, 71, 111, 0);
  }
}

.recording-controls {
  display: flex;
  gap: 12px;
  justify-content: center;
  flex-wrap: wrap;
  margin-top: 20px;
}

/* Buttons */
.btn {
  padding: 12px 24px;
  border-radius: var(--border-radius);
  border: none;
  font-weight: 500;
  cursor: pointer;
  transition: var(--transition);
  display: inline-flex;
  align-items: center;
  gap: 8px;
  font-size: 1rem;
}

.btn-primary {
  background: var(--primary);
  color: white;
}

.btn-primary:hover {
  background: var(--primary-dark);
  transform: translateY(-2px);
  box-shadow: var(--shadow);
}

.btn-secondary {
  background: var(--bg-card);
  color: var(--text-primary);
  border: 1px solid var(--border-color);
}

.btn-secondary:hover {
  background: var(--primary-light);
  border-color: var(--primary);
}

.btn-danger {
  background: var(--danger);
  color: white;
}

.btn-danger:hover {
  background: #e0355f;
  transform: translateY(-2px);
  box-shadow: var(--shadow);
}

.btn:disabled {
  opacity: 0.6;
  cursor: not-allowed;
  transform: none !important;
}

/* Audio Preview */
.audio-preview {
  margin-top: 30px;
  padding: 20px;
  background: var(--bg-secondary);
  border-radius: var(--border-radius);
  box-shadow: var(--shadow);
}

.audio-preview-title {
  text-align: center;
  margin-bottom: 16px;
  font-weight: 600;
  color: var(--text-primary);
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 10px;
}

.audio-player {
  width: 100%;
  margin-bottom: 16px;
  border-radius: 8px;
}

.audio-fallback {
  text-align: center;
  margin-top: 16px;
  padding: 16px;
  background: rgba(255, 209, 102, 0.2);
  border-radius: var(--border-radius);
  color: var(--text-primary);
}

/* Grid Layout */
.grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
  gap: 24px;
  margin-top: 24px;
}

.grid-card {
  background: var(--bg-card);
  border-radius: var(--border-radius);
  padding: 20px;
  box-shadow: var(--shadow);
  border: 1px solid var(--border-color);
  transition: var(--transition);
}

.grid-card:hover {
  transform: translateY(-5px);
  box-shadow: var(--shadow-lg);
}

.grid-card-header {
  display: flex;
  justify-content: space-between;
  align-items: flex-start;
  margin-bottom: 12px;
}

.grid-card-title {
  font-weight: 600;
  color: var(--text-primary);
  margin-bottom: 4px;
}

.status-badge {
  padding: 4px 10px;
  border-radius: 20px;
  font-size: 0.75rem;
  font-weight: 500;
}

.status-active {
  background: rgba(6, 214, 160, 0.2);
  color: var(--success);
}

.status-pending {
  background: rgba(255, 209, 102, 0.2);
  color: #e6a700;
}

.status-expired {
  background: rgba(239, 71, 111, 0.2);
  color: var(--danger);
}

.grid-card-meta {
  font-size: 0.85rem;
  color: var(--text-secondary);
  margin-bottom: 8px;
}

.grid-card-actions {
  display: flex;
  gap: 8px;
  margin-top: 16px;
}

.card-action-btn {
  flex: 1;
  padding: 8px 12px;
  border-radius: var(--border-radius);
  border: none;
  font-size: 0.85rem;
  cursor: pointer;
  transition: var(--transition);
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 6px;
}

/* Result Section */
.result-section {
  margin-top: 30px;
  padding: 24px;
  background: var(--bg-secondary);
  border-radius: var(--border-radius);
  box-shadow: var(--shadow);
}

.result-header {
  display: flex;
  align-items: center;
  gap: 12px;
  margin-bottom: 16px;
}

.result-title {
  font-weight: 600;
  font-size: 1.2rem;
}

.result-actions {
  display: flex;
  gap: 12px;
  flex-wrap: wrap;
  margin-top: 20px;
}

/* Receiver View */
.receiver-view {
  padding: 30px;
  background: var(--bg-secondary);
  border-radius: var(--border-radius);
  box-shadow: var(--shadow);
  text-align: center;
}

.receiver-header {
  margin-bottom: 24px;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 12px;
}

.receiver-audio-section {
  margin-bottom: 24px;
}

.receiver-controls {
  margin-top: 24px;
}

/* Loader */
.loader {
  position: fixed;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  background: var(--darker);
  color: white;
  z-index: 1400;
  font-family: var(--font-main);
}

.loader-content {
  text-align: center;
}

.loader-icon {
  font-size: 4rem;
  margin-bottom: 20px;
  animation: spin 2s linear infinite;
}

@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

/* Notification */
.notification {
  position: fixed;
  top: 20px;
  right: 20px;
  padding: 16px 24px;
  background: var(--success);
  color: white;
  border-radius: var(--border-radius);
  box-shadow: var(--shadow-lg);
  z-index: 1500;
  animation: slideIn 0.3s ease;
  max-width: 350px;
}

@keyframes slideIn {
  from {
    transform: translateX(100%);
    opacity: 0;
  }
  to {
    transform: translateX(0);
    opacity: 1;
  }
}

/* Hidden Utility */
.hidden {
  display: none !important;
}

/* Responsive Design */
@media (max-width: 768px) {
  .container {
    padding: 0 16px;
  }
  
  .header {
    flex-direction: column;
    gap: 16px;
    padding: 16px 0;
  }
  
  .hero-section h1 {
    font-size: 2rem;
  }
  
  .hero-section p {
    font-size: 1rem;
  }
  
  .grid {
    grid-template-columns: 1fr;
  }
  
  .recording-controls {
    flex-direction: column;
    align-items: center;
  }
  
  .btn {
    width: 100%;
    justify-content: center;
  }
  
  .result-actions {
    flex-direction: column;
  }
  
  .grid-card-actions {
    flex-direction: column;
  }
}

@media (max-width: 480px) {
  .mic-btn {
    width: 80px;
    height: 80px;
    font-size: 2rem;
  }
  
  .card {
    padding: 20px 16px;
  }
  
  .recording-section {
    padding: 20px 16px;
  }
}
</style>
</head>
<body data-theme="dark">
  <div class="container">
    <header class="header">
      <div class="logo">
        <i class="fas fa-wave-square logo-icon"></i>
        <span>Echo</span>
      </div>
      <div class="header-buttons">
        <button id="guideBtn" class="header-btn" title="Guide">
          <i class="fas fa-question-circle"></i>
          Guide
        </button>
        <button id="themeBtn" class="header-btn" title="Toggle theme">
          <i class="fas fa-moon"></i>
          Theme
        </button>
      </div>
    </header>

    <div class="app" id="app" hidden>
      <section class="hero-section">
        <h1>Anonymous Voice Connect</h1>
        <p>Record â†’ Upload â†’ Share. Professional voice messaging made simple.</p>
      </section>

      <!-- Enhanced Mobile Warning -->
      <div class="mobile-warning" id="mobileWarning">
        <h3><i class="fas fa-mobile-alt"></i> Mobile Tips</h3>
        <ul>
          <li>Use headphones for better recording quality</li>
          <li>Allow microphone permissions when prompted</li>
          <li>Use Chrome or Safari for best compatibility</li>
          <li>Make sure your device volume is turned up</li>
        </ul>
      </div>

      <!-- Sender View -->
      <div id="senderView">
        <div class="card">
          <div class="card-header">
            <h2 class="card-title">Create Voice Message</h2>
          </div>
          
          <div class="form-group">
            <label for="senderName" class="form-label">Your Display Name</label>
            <input type="text" id="senderName" class="form-control" placeholder="Enter your name or stay anonymous" />
          </div>
          
          <div class="form-group">
            <label for="privacy" class="form-label">Privacy Setting</label>
            <div class="select-wrap">
              <select id="privacy" name="privacy" class="form-control">
                <option value="anonymous">Anonymous - Hide identity</option>
                <option value="reveal_on_request">Reveal on Request - Approve identity requests</option>
                <option value="auto_reveal">Auto Reveal - Show identity automatically</option>
              </select>
            </div>
          </div>
          
          <div class="form-group">
            <label for="expiry" class="form-label">Message Expiry</label>
            <div class="select-wrap">
              <select id="expiry" name="expiry" class="form-control">
                <option value="permanent">Permanent - Never expires</option>
                <option value="24h">24 hours - Auto-deletes after 1 day</option>
                <option value="1h">1 hour - Quick temporary message</option>
              </select>
            </div>
          </div>
          
          <!-- Enhanced Recording Section -->
          <div class="recording-section">
            <div class="mic-container">
              <button id="micBtn" class="mic-btn" title="Start recording">
                <i class="fas fa-microphone"></i>
              </button>
            </div>
            <div id="recordingStatus" class="recording-status"></div>
            <div class="recording-controls">
              <button id="stopBtn" class="btn btn-danger" disabled>
                <i class="fas fa-stop"></i>
                Stop Recording
              </button>
              <button id="uploadBtn" class="btn btn-primary" hidden>
                <i class="fas fa-cloud-upload-alt"></i>
                Upload Voice
              </button>
            </div>
          </div>
          
          <!-- Audio Preview -->
          <div id="audioPreviewSection" class="audio-preview hidden">
            <div class="audio-preview-title">
              <i class="fas fa-headphones"></i>
              Preview Your Recording
            </div>
            <audio id="preview" controls class="audio-player"></audio>
            <div id="audioFallback" class="audio-fallback hidden">
              <p>Audio player not working?</p>
              <button onclick="downloadAudio()" class="btn btn-warning">
                <i class="fas fa-download"></i>
                Download Recording
              </button>
            </div>
          </div>

          <div id="result" class="result-section hidden"></div>
        </div>

        <!-- Pending Requests Section -->
        <div id="pendingRequestsSection" class="hidden">
          <div class="card">
            <div class="card-header">
              <h2 class="card-title">Pending Identity Requests</h2>
            </div>
            <div id="pendingRequestsList" class="grid">
              <!-- Pending requests will appear here -->
            </div>
          </div>
        </div>

        <!-- My Voice Messages -->
        <div class="card">
          <div class="card-header">
            <h2 class="card-title">My Voice Messages</h2>
          </div>
          <div id="grid" class="grid">
            <!-- Voice messages will appear here -->
          </div>
        </div>
      </div>

      <!-- Receiver View -->
      <div id="receiverView" class="receiver-view hidden">
        <div class="receiver-header">
          <i class="fas fa-message"></i>
          <h2>Incoming Voice Message</h2>
        </div>
        
        <!-- Enhanced Audio Player -->
        <div id="audioPlayerSection" class="receiver-audio-section">
          <audio id="playAudio" controls class="audio-player" preload="auto"></audio>
          <div id="receiverAudioFallback" class="audio-fallback hidden">
            <p>Can't play audio? Try downloading the voice message:</p>
            <button onclick="downloadReceiverAudio()" class="btn btn-warning">
              <i class="fas fa-download"></i>
              Download Voice Message
            </button>
          </div>
        </div>
        
        <div class="receiver-controls">
          <button id="playBtn" class="btn btn-primary">
            <i class="fas fa-play"></i>
            Play Message
          </button>
        </div>
        
        <div id="receiverStatus" class="receiver-status"></div>
        <div id="revealSection" class="reveal-section"></div>
      </div>
    </div>

    <div id="loader" class="loader">
      <div class="loader-content">
        <div class="loader-icon">
          <i class="fas fa-wave-square"></i>
        </div>
        <div>Loading Echo...</div>
      </div>
    </div>
  </div>

<script>
// Your existing JavaScript code remains the same, but now with enhanced UI interactions
// I'm including only the parts that need to be modified for the new UI

// Initialize the app with the new UI
window.addEventListener('load', () => {
  setTimeout(() => {
    document.getElementById('loader').style.display = 'none';
    document.getElementById('app').hidden = false;
    
    // Check if we're in receiver mode
    const params = new URLSearchParams(window.location.search);
    const voiceId = params.get("v");
    
    if (voiceId) {
      document.getElementById('senderView').hidden = true;
      document.getElementById('receiverView').hidden = false;
      loadReceiver();
    } else {
      document.getElementById('senderView').hidden = false;
      document.getElementById('receiverView').hidden = true;
      loadDashboard();
      loadPendingRequests();
    }
  }, 1000);
});

// Theme toggle
let dark = true;
document.getElementById('themeBtn').onclick = () => {
  dark = !dark;
  document.body.setAttribute('data-theme', dark ? 'dark' : 'light');
  document.getElementById('themeBtn').innerHTML = dark ? 
    '<i class="fas fa-moon"></i> Theme' : 
    '<i class="fas fa-sun"></i> Theme';
};

// Guide button
document.getElementById('guideBtn').onclick = () => {
  alert("ðŸŽµ Echo Voice Messenger\n\nâ˜… Record voice messages\nâ˜… Set privacy levels\nâ˜… Share via link or QR code\nâ˜… Track message statistics\nâ˜… Delete messages anytime\nâ˜… Handle identity requests\n\nðŸ“± Mobile Tips: Use headphones for better quality! Allow microphone permissions when prompted.");
};

// Enhanced mobile detection
function isMobileDevice() {
  return /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
}

// Show/hide mobile warning
if (isMobileDevice()) {
  document.getElementById('mobileWarning').style.display = 'block';
} else {
  document.getElementById('mobileWarning').style.display = 'none';
}

// Your existing recording, upload, and other functionality remains the same
// All the functions like micBtn.onclick, stopBtn.onclick, uploadBtn.onclick, etc.
// The UI will now use the new styling but the functionality is unchanged

// Enhanced notification system
function showNotification(message, duration = 3000) {
  // Remove existing notification
  const existingNotification = document.querySelector('.notification');
  if (existingNotification) {
    existingNotification.remove();
  }
  
  const notification = document.createElement('div');
  notification.className = 'notification';
  notification.innerHTML = `<i class="fas fa-info-circle"></i> ${message}`;
  document.body.appendChild(notification);
  
  setTimeout(() => {
    if (notification.parentNode) {
      notification.parentNode.removeChild(notification);
    }
  }, duration);
}

// The rest of your JavaScript code remains the same
// All the functions for recording, uploading, dashboard, etc.

// For demonstration purposes, I'm including a simplified version of the dashboard loading
function loadDashboard() {
  const voices = getVoiceMessages().filter(v => v.senderId === SENDER_ID);
  const grid = document.getElementById('grid');
  
  if (voices.length === 0) {
    grid.innerHTML = `
      <div style="text-align: center; padding: 40px; color: var(--text-secondary);">
        <div style="font-size: 3rem; margin-bottom: 20px;"><i class="fas fa-wave-square"></i></div>
        <p>No voice messages yet. Record your first message above!</p>
      </div>
    `;
    return;
  }
  
  grid.innerHTML = voices.map(voice => `
    <div class="grid-card">
      <div class="grid-card-header">
        <div>
          <div class="grid-card-title">${voice.senderName}</div>
          <div class="grid-card-meta">Created: ${new Date(voice.timestamp).toLocaleDateString()}</div>
        </div>
        <span class="status-badge status-active">${getExpiryText(voice.expiry)}</span>
      </div>
      <div class="grid-card-meta">
        Plays: ${voice.playCount || 0} â€¢ Opens: ${voice.openCount || 0}
      </div>
      <div class="grid-card-actions">
        <button class="card-action-btn btn-primary" onclick="window.open('?v=${voice.id}', '_blank')">
          <i class="fas fa-external-link-alt"></i> Open
        </button>
        <button class="card-action-btn btn-secondary" onclick="copyToClipboard('${window.location.origin}${window.location.pathname}?v=${voice.id}')">
          <i class="fas fa-copy"></i> Copy
        </button>
        <button class="card-action-btn btn-danger" onclick="confirmDelete('${voice.id}')">
          <i class="fas fa-trash"></i> Delete
        </button>
      </div>
    </div>
  `).join('');
}

// Initialize user ID and other variables
if (!localStorage.getItem('echo_id')) {
  localStorage.setItem('echo_id', 'echo_' + Math.random().toString(36).slice(2,9));
}
const SENDER_ID = localStorage.getItem('echo_id');

// Initialize storage
if (!localStorage.getItem('echo_voices')) {
  localStorage.setItem('echo_voices', JSON.stringify([]));
}
if (!localStorage.getItem('echo_requests')) {
  localStorage.setItem('echo_requests', JSON.stringify([]));
}

// Placeholder for other functions that would be in your original code
let mediaRecorder, chunks = [];
let recordedBlob = null;
let audioStream = null;
const AppState = {
  currentUser: null,
  currentVoiceMessage: null,
  activeChats: [],
  isRecording: false,
  mediaRecorder: null,
  audioChunks: []
};

function getVoiceMessages() {
  return JSON.parse(localStorage.getItem('echo_voices') || '[]');
}

function getVoiceMessage(id) {
  const voices = JSON.parse(localStorage.getItem('echo_voices') || '[]');
  return voices.find(v => v.id === id);
}

function saveVoiceMessage(voiceData) {
  const voices = JSON.parse(localStorage.getItem('echo_voices') || '[]');
  const existingIndex = voices.findIndex(v => v.id === voiceData.id);
  
  if (existingIndex >= 0) {
    voices[existingIndex] = voiceData;
  } else {
    voices.push(voiceData);
  }
  
  localStorage.setItem('echo_voices', JSON.stringify(voices));
}

function getExpiryText(expiry) {
  const expiryTexts = {
    'permanent': 'Permanent',
    '24h': '24 Hours',
    '1h': '1 Hour'
  };
  return expiryTexts[expiry] || expiry;
}

function confirmDelete(voiceId) {
  if (confirm('Are you sure you want to delete this voice message? This action cannot be undone.')) {
    deleteVoiceMessage(voiceId);
  }
}

function deleteVoiceMessage(voiceId) {
  const voices = JSON.parse(localStorage.getItem('echo_voices') || '[]');
  const filteredVoices = voices.filter(v => v.id !== voiceId);
  localStorage.setItem('echo_voices', JSON.stringify(filteredVoices));
  loadDashboard();
  showNotification('Voice message deleted');
}

function copyToClipboard(text) {
  navigator.clipboard.writeText(text).then(() => {
    showNotification('Link copied to clipboard!');
  }).catch(err => {
    // Fallback for older browsers
    const textArea = document.createElement('textarea');
    textArea.value = text;
    document.body.appendChild(textArea);
    textArea.select();
    try {
      document.execCommand('copy');
      showNotification('Link copied to clipboard!');
    } catch (fallbackErr) {
      showNotification('Failed to copy link');
    }
    document.body.removeChild(textArea);
  });
}

// Placeholder for other functions that would be in your original code
function loadPendingRequests() {}
function loadReceiver() {}
function downloadAudio() {}
function downloadReceiverAudio() {}
</script>
</body>
</html>
